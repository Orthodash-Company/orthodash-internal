(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{6606:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>l,A:()=>c});var r=s(95155),i=s(12115),o=s(80549),n=s(15894),a=s(65040);s(95704);let d=(0,a.UU)("https://kehjphirpsryupvqknmy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtlaGpwaGlycHNyeXVwdnFrbm15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxNDA0OTcsImV4cCI6MjA3MTcxNjQ5N30.CVqmrQRVudOAcScg4AT3D1bALj_mgSx7kPjqHfr5uL0"),u=(0,i.createContext)(null);function l(e){let{children:t}=e,{toast:s}=(0,n.dj)(),[a,l]=(0,i.useState)(null),[c,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{d.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;l(null!=(t=null==s?void 0:s.user)?t:null),m(!1)});let{data:{subscription:e}}=d.auth.onAuthStateChange((e,t)=>{var s;l(null!=(s=null==t?void 0:t.user)?s:null),m(!1)});return()=>e.unsubscribe()},[]);let f=(0,o.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await d.auth.signInWithPassword({email:e.username,password:e.password});if(s){if(s.message.includes("Invalid login credentials")){let{data:t,error:s}=await d.auth.signUp({email:e.username,password:e.password});if(s)throw Error("Failed to create user");return t.user}throw Error(s.message)}return t.user},onSuccess:e=>{l(e),s({title:"Login successful",description:"Welcome to ORTHODASH!"})},onError:e=>{s({title:"Login failed",description:e.message,variant:"destructive"})}}),v=(0,o.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await d.auth.signUp({email:e.username,password:e.password});if(s)throw Error(s.message);return t.user},onSuccess:e=>{l(e),s({title:"Registration successful",description:"Welcome to ORTHODASH!"})},onError:e=>{s({title:"Registration failed",description:e.message,variant:"destructive"})}}),b=(0,o.useMutation)({mutationFn:async()=>{let{error:e}=await d.auth.signOut();if(e)throw Error(e.message)},onSuccess:()=>{l(null),s({title:"Logged out",description:"You have been successfully logged out."})},onError:e=>{s({title:"Logout failed",description:e.message,variant:"destructive"})}});return(0,r.jsx)(u.Provider,{value:{user:a,loading:c,error:h,loginMutation:f,logoutMutation:b,registerMutation:v},children:t})}function c(){let e=(0,i.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},13673:()=>{},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>c});var r=s(12115);let i=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},a=[],d={toasts:[]};function u(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),a.forEach(e=>{e(d)})}function l(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function c(){let[e,t]=r.useState(d);return r.useEffect(()=>(a.push(t),()=>{let e=a.indexOf(t);e>-1&&a.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},46767:(e,t,s)=>{"use strict";s.d(t,{TooltipProvider:()=>a});var r=s(95155),i=s(12115),o=s(98541),n=s(64269);let a=o.Kq;o.bL,o.l9,i.forwardRef((e,t)=>{let{className:s,sideOffset:i=4,...a}=e;return(0,r.jsx)(o.UC,{ref:t,sideOffset:i,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...a})}).displayName=o.UC.displayName},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var r=s(2821),i=s(75889);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}},98193:(e,t,s)=>{Promise.resolve().then(s.bind(s,65961)),Promise.resolve().then(s.bind(s,18298)),Promise.resolve().then(s.bind(s,84019)),Promise.resolve().then(s.bind(s,99776)),Promise.resolve().then(s.bind(s,47785)),Promise.resolve().then(s.bind(s,25979)),Promise.resolve().then(s.bind(s,59441)),Promise.resolve().then(s.bind(s,80549)),Promise.resolve().then(s.bind(s,1043)),Promise.resolve().then(s.bind(s,11515)),Promise.resolve().then(s.bind(s,53455)),Promise.resolve().then(s.bind(s,45339)),Promise.resolve().then(s.bind(s,5947)),Promise.resolve().then(s.bind(s,86639)),Promise.resolve().then(s.t.bind(s,28963,23)),Promise.resolve().then(s.t.bind(s,13673,23)),Promise.resolve().then(s.bind(s,46767)),Promise.resolve().then(s.bind(s,6606))}},e=>{e.O(0,[300,529,436,441,255,358],()=>e(e.s=98193)),_N_E=e.O()}]);